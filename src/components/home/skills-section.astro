---
import WebSkillsSection from "./skills-web-section.astro";
import DevOpsSkillsSection from "./skills-devops-section.astro";
import { Icon } from "astro-icon/components";
import PageHeading from "../ui/page-heading.astro";
import Button from "../ui/button.astro";
---

<section
  class="relative z-20 max-w-2xl mx-auto my-8 sm:my-12 px-4 sm:px-7 lg:px-0"
>
  <div
    class="flex flex-col sm:flex-row items-center sm:items-start justify-between mb-8"
  >
    <h1 class="skills-title text-3xl sm:text-4xl font-bold mb-4 sm:mb-0">
      Web Dev <span class="text-blue-500">Skills</span>
    </h1>

    <div class="flex gap-2">
      <button
        id="web-toggle"
        class="flex items-center px-4 py-2 text-sm font-semibold rounded-full transition-all duration-300 bg-neutral-900 text-neutral-50 border border-neutral-900 hover:border-neutral-500 hover:bg-white hover:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900 active"
        aria-pressed="true"
      >
        <Icon name="simple-icons:react" class="w-5 h-5 mr-2" />
        <span>Web Dev</span>
      </button>
      <button
        id="devops-toggle"
        class="flex items-center px-4 py-2 text-sm font-semibold rounded-full transition-all duration-300 bg-neutral-900 text-neutral-50 border border-neutral-900 hover:border-neutral-500 hover:bg-white hover:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900"
        aria-pressed="false"
      >
        <Icon name="simple-icons:kubernetes" class="w-5 h-5 mr-2" />
        <span>DevOps</span>
      </button>
    </div>
  </div>

  <div id="web-skills" class="block animate-fadeIn">
    <WebSkillsSection />
  </div>
  <div id="devops-skills" class="hidden">
    <DevOpsSkillsSection />
  </div>
</section>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.5s ease;
  }

  /* Light mode active styles */
  #web-toggle.active,
  #devops-toggle.active {
    @apply bg-white text-slate-900 border-blue-500 border-2 shadow-sm;
  }

  #web-toggle.active .w-5,
  #devops-toggle.active .w-5 {
    @apply text-blue-500;
  }

  /* Dark mode styles */
  html.dark #web-toggle,
  html.dark #devops-toggle {
    @apply bg-white text-neutral-900 border-white;
  }

  html.dark #web-toggle:hover,
  html.dark #devops-toggle:hover {
    @apply bg-black text-white border-neutral-300;
  }

  html.dark #web-toggle:focus,
  html.dark #devops-toggle:focus {
    @apply ring-white;
  }

  html.dark #web-toggle.active,
  html.dark #devops-toggle.active {
    @apply bg-slate-800 text-white border-blue-500 border-2 shadow-sm;
  }
</style>

<script>
  // Get toggle buttons and skill sections
  const webToggle = document.getElementById("web-toggle");
  const devopsToggle = document.getElementById("devops-toggle");
  const webSkills = document.getElementById("web-skills");
  const devopsSkills = document.getElementById("devops-skills");
  const skillsTitle = document.querySelector(".skills-title");

  // Add click event listeners
  webToggle.addEventListener("click", () => {
    webToggle.classList.add("active");
    devopsToggle.classList.remove("active");
    webSkills.classList.remove("hidden");
    webSkills.classList.add("block", "animate-fadeIn");
    devopsSkills.classList.add("hidden");
    devopsSkills.classList.remove("block", "animate-fadeIn");
    webToggle.setAttribute("aria-pressed", "true");
    devopsToggle.setAttribute("aria-pressed", "false");
    // Update page title to reflect selected skills
    skillsTitle.innerHTML = 'Web Dev <span class="text-blue-500">Skills</span>';
  });

  devopsToggle.addEventListener("click", () => {
    devopsToggle.classList.add("active");
    webToggle.classList.remove("active");
    devopsSkills.classList.remove("hidden");
    devopsSkills.classList.add("block", "animate-fadeIn");
    webSkills.classList.add("hidden");
    webSkills.classList.remove("block", "animate-fadeIn");
    devopsToggle.setAttribute("aria-pressed", "true");
    webToggle.setAttribute("aria-pressed", "false");
    // Update page title to reflect selected skills
    skillsTitle.innerHTML = 'DevOps <span class="text-blue-500">Skills</span>';
  });
</script>
